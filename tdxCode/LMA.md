```
N:=24;
LA:= 2 * WMA(C, N) - MA(C, N);
LMA:EMA(LA, 3);
IF(LMA > REF(LMA, 1), LMA, DRAWNULL), COLORRED, LINETHICK2;
IF(LMA < REF(LMA, 1), LMA, DRAWNULL), COLORGREEN, LINETHICK2;
DRAWICON(CROSS(LMA,REF(LMA,1)),H,1);
DRAWICON(CROSS(REF(LMA,1),LMA),L,2);


{画笔}
FRAC:=TDXDLL5(6,0,H,L);
DRAWLINE(FRAC=-1,L,FRAC=+1,H,0), DOTLINE,LINETHICK1,COLORRED;
DRAWLINE(FRAC=+1,H,FRAC=-1,L,0), DOTLINE,LINETHICK1,COLORGREEN;

{画段}
DUAN:=TDXDLL5(7,FRAC,H,L);{计算段的端点}
DRAWLINE(DUAN=-1,L,DUAN=+1,H,0), COLORFF8000;{上升段}
DRAWLINE(DUAN=+1,H,DUAN=-1,L,0), COLORFF8000;{下降}

{标出段高低点}
DRAWNUMBER(DUAN=1,H,H),COLORFF8000,DRAWABOVE;
DRAWNUMBER(DUAN=-1,L*0.999,L),COLORFF8000;
```



